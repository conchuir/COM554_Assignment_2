function cookie_adcknowledge(){"use strict";localStorage.setItem("cookie_acknowledge",!0)}function loadNews(e,t){$.getJSON(e,function(e){$items=e.response.results,$("#j_button_"+t).attr("onclick",'loadModal("'+$items[0].id+'")'),$("#j_title_"+t).append($items[0].webTitle),$("#jumbotron_"+t).css({background:"linear-gradient(rgba(255,255,255,0.7), rgba(255,255,255, 0.45)),url("+$items[0].fields.thumbnail+") no-repeat","background-size":"100%"});var a=0;for(i=1;i<$items.length;i++){i%3==1&&(a++,$("#holder_"+t).append('<div class="row_contain" id="row_contain_'+t+"_"+a+'"></div>'));var d="";d+='                <div id="'+$items[i].id+'" class="col-xs-6 col-sm-4">                    <div class="panel panel-default">                        <div class="panel-body">                            <img class="news_thumb" src="'+$items[i].fields.thumbnail+'">                        <div>                        <div class="panel-footer">                            <h3>'+$items[i].webTitle+"</h3>                            <p>by "+$items[i].fields.byline+"</p>                            <p>"+$items[i].webPublicationDate.replace(/T|Z/g," ")+'</p>                            <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#news_item_modal" onclick="loadModal(\''+$items[i].id+"')\">Open</button>                        <div>                    </div>                </div>",$("#row_contain_"+t+"_"+a).append(d),checkRead($items[i].id)&&fade($items[i].id)}})}function loadModal(e){var t=buildUrl(e,"");$.getJSON(t,function(e){$item=e.response.content,$("#modal_img").attr("src",$item.fields.thumbnail),$("#modal_title").html($item.webTitle),$("#modal_text").html($item.fields.body)}),markItemRead(e)}function markItemRead(e){"use strict";localStorage.setItem(e,!0),fade(e)}function fade(e){$("div[id='"+e+"']").addClass("mark_read")}function checkRead(e){return localStorage.getItem(e)?!0:!1}function addNavItem(e,t){"use strict";var a='<li><a href="#tabs_'+t+'">'+e+"</a></li>";$("#nav_ul").append(a)}function addTab(e){"use strict";var t='                <div id="tabs_'+e+'">                    <div class="jumbotron" id="jumbotron_'+e+'">                        <h1 id="j_title_'+e+'"></h1>                        <p><a id="j_button_'+e+'" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#news_item_modal" onclick="">View Story</a></p>                    </div>                    <div id=\'holder_'+e+"'></div>                </div>";$("#tabs").append(t)}function buildContent(e){"use strict";for(var t=1;t<e.length;t++){var a=e[t][0],i=e[t][1],d=e[t][2],n=e[t][3],l=buildUrl(d,n);addNavItem(a,i),addTab(i),loadNews(l,i)}addTab("99"),$("#nav_ul").append('<li class="hidden"><a href="#tabs_99">Search</a></li>'),$(function(){$("#tabs").tabs()})}function buildUrl(e,t){"use strict";var a="https://content.guardianapis.com/",i="api-key=8b7ca0fc-3914-4473-9c07-e9b56781ce88",d="&show-fields=thumbnail%2Cbyline%2Cbody";""!=t?t+="&":t="?";var n=""+a+e+t+i+d;return n}function search(){"use strict";var e=$("#search_text").val().replace(/ /g,"%20"),t=buildUrl("search","?q="+e);$("#tabs_99").remove(),addTab("99"),loadNews(t,"99"),$("#tabs").tabs("option","active",content_array.length-1)}function help(){$("#search_help").removeClass("hidden")}function hideHelp(){$("#search_help").addClass("hidden")}$(document).ready(function(){"use strict";localStorage.getItem("cookie_acknowledge")&&$("#cookie_alert").addClass("hidden")});
